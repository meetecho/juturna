Pipelines
=========

The easiest way to interact with Juturna pipelines is through ``JSON`` objects.
The definition of a pipeline graph can be included in a plain ``JSON`` file, and
the library will *compile* it into a pipeline instance. When defining a
pipeline, however, we still need to provide Juturna with a few extra bits of
information.

The most basic pipeline configuration file looks something like this:

.. code-block:: json

    {
      "version": "1.0.1",
      "plugins": ["./plugins"],
      "pipeline": {
        "name": "my_awesome_pipeline",
        "id": "1234567890",
        "folder": "./running_pipelines",
        "nodes": [ ],
        "links": [ ]
      }
    }

``version`` refers to the Juturna version in use; this field needs to be
specified, even if it is likely to be removed in the future - as of now, it is
important to keep it to make sure the API version is correct and nothing breaks
apart.

``plugins`` is a collection of directories Juturna will look into when
automatically importing plugin nodes.

``name`` is a symbolic name to assign to the pipeline, and will be used for
logging and static file and artifact management.

``id`` is aunique pipeline identifier, not as handy as the pipeline name but
still required by other tools that might wrap Juturna and manage multiple
pipelines at once. With those tools, pipeline ids are likely to be assigned
automatically in order to prevent overlaps.

``folder`` is the path to the folder where the required pipeline tree will be
created (here is where any files generated by the pipeline are stored).

``nodes`` is the list of nodes composing the pipeline.

``links`` is the list of connections between node pairs.

Once we have this configuration in place, we can go ahead and create the
actual pipeline object.

.. code-block:: python

    import juturna as jt


    pipe = jt.components.Pipeline.from_json('path/to/config.json')

The ``Pipeline`` class constructor accepts a dictionary object:

.. code-block:: python

    import json

    import juturna as jt


    with open('path/to/config.json') as f:
        config = json.load(f)

    pipe = jt.components.Pipeline(config)

Pipeline lifecycle
------------------

.. image:: ../_static/img/pipeline_lifecycle.svg
   :alt: pipeline
   :width: 80%
   :align: center

Ciao ciao.

.. admonition:: Restarting a pipeline might catch fire
    :class: :ATTENTION:

    ciao